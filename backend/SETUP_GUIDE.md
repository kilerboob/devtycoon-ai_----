# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Backend –¥–ª—è DevTycoon AI: ANGverse Edition

## –ü—Ä–æ–±–ª–µ–º–∞: PostgreSQL –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É `password authentication failed for user "postgres"`, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –æ–¥–Ω–æ –∏–∑:

1. **PostgreSQL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** –Ω–∞ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ
2. **–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å** –≤ —Ñ–∞–π–ª–µ `.env`
3. **PostgreSQL –Ω–µ –∑–∞–ø—É—â–µ–Ω**

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

### –®–∞–≥ 1: –°–∫–∞—á–∞–π—Ç–µ PostgreSQL
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://www.postgresql.org/download/windows/
- –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –¥–ª—è Windows
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫

### –®–∞–≥ 2: –í–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ó–∞–ø–æ–º–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `postgres`
- –ü–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `5432` (–æ—Å—Ç–∞–≤—å—Ç–µ –∫–∞–∫ –µ—Å—Ç—å)

### –®–∞–≥ 3: –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `backend/.env`
2. –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
   ```
   DB_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å_–∫–æ—Ç–æ—Ä—ã–π_–≤—ã_—É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```powershell
   npx ts-node src/setupDb.ts
   ```

---

## ‚ö° –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker (–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç)

–ï—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker:

```powershell
# –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker run --name devtycoon-postgres -e POSTGRES_PASSWORD=password -p 5432:5432 -d postgres

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 5 —Å–µ–∫—É–Ω–¥, –∑–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É
npx ts-node src/setupDb.ts
```

---

## üîß –†–µ—à–µ–Ω–∏–µ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ PostgreSQL

–ï—Å–ª–∏ PostgreSQL —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–æ –≤—ã –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å:

### Windows:
1. –ù–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª `pg_hba.conf` (–æ–±—ã—á–Ω–æ –≤ `C:\Program Files\PostgreSQL\15\data\`)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –≤ –±–ª–æ–∫–Ω–æ—Ç–µ —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å `md5` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ `trust`:
   ```
   # IPv4 local connections:
   host    all             all             127.0.0.1/32            trust
   ```
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É PostgreSQL:
   ```powershell
   # –í PowerShell —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
   Restart-Service postgresql-x64-15
   ```
5. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –±–µ–∑ –ø–∞—Ä–æ–ª—è. –ò–∑–º–µ–Ω–∏—Ç–µ `.env`:
   ```
   DB_PASSWORD=
   ```
6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npx ts-node src/setupDb.ts`

---

## üìù –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î (–µ—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç `setupDb.ts` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ë–î –≤—Ä—É—á–Ω—É—é:

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ pgAdmin –∏–ª–∏ psql
```powershell
psql -U postgres
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
```sql
CREATE DATABASE devtycoon_angverse;
```

### 3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –Ω–µ–π
```sql
\c devtycoon_angverse
```

### 4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `backend/sql/init.sql` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ

### 5. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π —à–∞—Ä–¥
```sql
SELECT create_node_shard('node_01');
```

### 6. –ì–æ—Ç–æ–≤–æ! –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
```powershell
npm run dev
```

---

## üÜò –í—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–ù–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –≤—ã–≤–æ–¥ —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–∞–Ω–¥:

```powershell
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ PostgreSQL
psql --version

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Å–ª—É–∂–±
Get-Service | Where-Object {$_.Name -like "*postgres*"}

# –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
psql -U postgres -h localhost
```

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É.
